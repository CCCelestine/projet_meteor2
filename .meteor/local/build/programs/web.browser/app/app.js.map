{"version":3,"sources":["meteor://ðŸ’»app/client/views/users/dashboard.js","meteor://ðŸ’»app/client/views/users/login.js","meteor://ðŸ’»app/client/config/FormHooks/Commerces.js","meteor://ðŸ’»app/client/config/FormHooks/Menus.js","meteor://ðŸ’»app/client/config/FormHooks/Users.js","meteor://ðŸ’»app/client/config/Helpers.js","meteor://ðŸ’»app/lib/Globals.js","meteor://ðŸ’»app/lib/Utils.js","meteor://ðŸ’»app/lib/routeur.js","meteor://ðŸ’»app/collections/Commerces.js","meteor://ðŸ’»app/collections/Menus.js","meteor://ðŸ’»app/collections/Users.js"],"names":["Template","dashboard","events","event","preventDefault","Meteor","logout","Router","go","Utils","pathFor","login","template","user","$","val","password","loginWithPassword","err","alert","reason","AutoForm","hooks","onSubmit","doc","console","log","error","name","horaire","telephone","ville","adresse","Commerces","insert","Error","done","onSuccess","onError","formType","commerces","description","prix","rest","photo","Menus","email","emails","address","Accounts","createUser","username","profile","UI","registerHelper","varName","Globals","title","appName","document","Roles","userIsInRole","userId","helpers","controller","Iron","_id","getParams","menus","find","appSlogan","schemas","formatDate","date","Date","day","getDate","toString","month","getMonth","year","getFullYear","length","routeName","params","route","routes","path","configure","layoutTemplate","data","waitOn","subscribe","render","id","findOne","SimpleSchema","module","watch","require","v","extendOptions","Mongo","Collection","allow","update","remove","attachSchema","type","String","label","Array","Number","optional","UserProfile","firstName","regEx","lastName","birthDay","gender","allowedValues","autoform","afFieldInput","options","value","User","confirmation","custom","field","Object","RegEx","Email","Boolean","omit","createdAt","autoValue","isInsert","unset","services","blackbox","roles","users"],"mappings":"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","file":"/app.js","sourcesContent":["Template.dashboard.events({\r\n    'click .logout': function(event){\r\n        event.preventDefault();\r\n        Meteor.logout();\r\n        Router.go(Utils.pathFor('accueil'));\r\n    }\r\n});","Template.login.events({\r\n    \"submit form\": function(event, template) {\r\n        event.preventDefault();\r\n\r\n        var user = $('#username').val();\r\n        var password = $('#password').val();\r\n\r\n        Meteor.loginWithPassword(user, password, function(err) {\r\n            if (err) {\r\n                alert(err.reason);\r\n            } else {\r\n                Router.go(Utils.pathFor('loggedInHome'));\r\n            }\r\n        });\r\n    }\r\n});\r\n","AutoForm.hooks({\r\n    'ajoutCommerce': {\r\n        onSubmit: function(doc){ // Gestion du formulaire d'ajout de commerce\r\n            console.log(doc);\r\n            var error = null;\r\n            var name = doc.name;\r\n            var horaire = doc.horaire;\r\n            var telephone = doc.telephone;\r\n            var ville = doc.ville;\r\n            var adresse = doc.adresse;\r\n\r\n            Commerces.insert({\r\n                name: name,\r\n                horaire: horaire,\r\n                telephone: telephone,\r\n                ville: ville,\r\n                adresse: adresse\r\n            }, function(err){\r\n                if(err){\r\n                    error = new Error(\"Une erreur s'est produite\");\r\n                }\r\n            });\r\n\r\n            if(error === null){\r\n                this.done(); // Appelle onSuccess\r\n            }\r\n            else{\r\n                this.done(error); // Appelle onError\r\n            }\r\n\r\n            return false; // Dans tout les cas, arrete la soumission des donneÃ©s.\r\n        },\r\n\r\n        onSuccess: function(){\r\n            Router.go(Utils.pathFor('accueil'));\r\n        },\r\n\r\n        onError: function(formType, err){\r\n            alert(err.reason)\r\n        }\r\n\r\n    }\r\n});","AutoForm.hooks({\r\n    'ajoutMenu': {\r\n        onSubmit: function(doc){ // Gestion du formulaire d'ajout de menu\r\n            console.log(doc);\r\n            var error = null;\r\n            var commerces =  doc.commerces;\r\n            var name = doc.name;\r\n            var description = doc.description;\r\n            var prix = doc.prix;\r\n            var rest = doc.rest;\r\n            var photo = doc.photo;\r\n\r\n            Menus.insert({\r\n                commerces: commerces,\r\n                name: name,\r\n                description: description,\r\n                prix: prix,\r\n                rest: rest,\r\n                photo: photo\r\n            }, function(err){\r\n                if(err){\r\n                    error = new Error(\"Une erreur s'est produite\");\r\n                }\r\n            });\r\n\r\n            if(error === null){\r\n                this.done(); // Appelle onSuccess\r\n            }\r\n            else{\r\n                this.done(error); // Appelle onError\r\n            }\r\n\r\n            return false; // Dans tout les cas, arrete la soumission des donneÃ©s.\r\n        },\r\n\r\n        onSuccess: function(){\r\n            Router.go(Utils.pathFor('accueil'));\r\n        },\r\n\r\n        onError: function(formType, err){\r\n            alert(err.reason)\r\n        }\r\n\r\n    }\r\n});","AutoForm.hooks({\r\n    'insertUser': {\r\n        onSubmit: function(doc){ // Gestion du formulaire d'inscription\r\n            console.log(doc);\r\n            var error = null;\r\n            var password = doc.password;\r\n            var email = doc.emails[0].address;\r\n\r\n            Accounts.createUser({\r\n                username: doc.username,\r\n                email: email,\r\n                password: password,\r\n                profile: doc.profile ? doc.profile : {}\r\n            }, function(err){\r\n                if(err){\r\n                    error = new Error(\"Une erreur s'est produite\");\r\n                }\r\n            });\r\n\r\n            if(error === null){\r\n                this.done(); // Appelle onSuccess\r\n            }\r\n            else{\r\n                this.done(error); // Appelle onError\r\n            }\r\n\r\n            return false; // Dans tout les cas, arrete la soumission des donneÃ©s.\r\n        },\r\n\r\n        onSuccess: function(){\r\n            Router.go(Utils.pathFor('accueil'));\r\n        },\r\n\r\n        onError: function(formType, err){\r\n            alert(err.reason)\r\n        }\r\n\r\n    }\r\n});","UI.registerHelper('getGlobal', function(varName) {\r\n    return Globals[varName];\r\n});\r\n\r\nUI.registerHelper('setTitle', function(title){\r\n    if(!title){\r\n        title = Globals.appName;\r\n    }\r\n    else{\r\n        title += \" - \" + Globals.appName;\r\n    }\r\n\r\n    document.title = title;\r\n});\r\n\r\nUI.registerHelper('isAdmin', function () {\r\n    if (Roles.userIsInRole(Meteor.userId(), ['admin'])) {\r\n        return true\r\n    }\r\n    else return false;\r\n});\r\n\r\nTemplate.commerces.helpers({\r\n    'menus': function(){\r\n        let controller = Iron.controller();\r\n        let _id = controller.getParams()._id; //id du commerce\r\n        let menus = Menus.find({commerces: _id });\r\n        return menus;\r\n        },\r\n    }\r\n);\r\n\r\n// Template.body.helpers({\r\n//     exampleMapOptions: function() {\r\n//         // Make sure the maps API has loaded\r\n//         if (GoogleMaps.loaded()) {\r\n//             // Map initialization options\r\n//             return {\r\n//                 center: new google.maps.LatLng(-37.8136, 144.9631),\r\n//                 zoom: 8\r\n//             };\r\n//         }\r\n//     }\r\n// });","Globals = {\r\n    appName: \"GFaim\",\r\n    appSlogan: \"L'application qui comble votre faim !\",\r\n    schemas: {}\r\n};","Utils = {\r\n    formatDate: function(date) {\r\n        var date = new Date(date);\r\n\r\n        var day = date.getDate().toString();\r\n        var month = (date.getMonth() + 1).toString();\r\n        var year = date.getFullYear();\r\n\r\n        if (day.length === 1) {\r\n            day = '0' + day;\r\n        }\r\n\r\n        if (month.length === 1) {\r\n            month = '0' + month;\r\n        }\r\n\r\n        return day + '/' + month + '/' + year;\r\n    },\r\n\r\n    pathFor: function(routeName, params){\r\n        // Similaire au helper \"pathFor\", mais utilisable directement dans le code\r\n        var route = Router.routes[routeName].path(params);\r\n        return route;\r\n    }\r\n};","Router.configure({\r\n    layoutTemplate: 'mainLayout'\r\n});\r\n\r\nRouter.route('/', {\r\n    name: 'accueil',\r\n    template: \"accueil\",\r\n    data: function(){\r\n        var commerces = Commerces.find();\r\n\r\n        return {\r\n            commerces: commerces\r\n        };\r\n    },\r\n    waitOn: function(){\r\n        return Meteor.subscribe(\"allCommerces\");\r\n    }\r\n});\r\n\r\nRouter.route('/register', {\r\n    name: \"user.register\",\r\n    //name: \"register\",\r\n    template: \"register\"\r\n});\r\n\r\nRouter.route('/login', {\r\n    name: \"user.login\",\r\n    //name: \"login\",\r\n    template: \"login\"\r\n});\r\n\r\nRouter.route('/loggedInHome', {\r\n    name: \"loggedInHome\",\r\n    template: \"loggedInHome\"\r\n});\r\n\r\nRouter.route('/ajoutCommerce', {\r\n    name: \"ajoutCommerce\",\r\n    template: \"ajoutCommerce\"\r\n});\r\n\r\nRouter.route('/ajoutMenu', {\r\n    name: \"ajoutMenu\",\r\n    template: \"ajoutMenu\"\r\n});\r\n\r\n//Page affichant un commerce et ses menus\r\nRouter.route('/commerces/:_id', function () {\r\n    this.render('commerces', {\r\n        data: function () {\r\n            let id = this.params._id;\r\n            return Commerces.findOne({_id: this.params._id});\r\n        },\r\n        waitOn: function(){\r\n            return Meteor.subscribe(\"allCommerces\");\r\n        }\r\n    });\r\n});\r\n\r\nRouter.route('/commerces/:_id/add',\r\n    function () {\r\n    this.render('ajoutMenu', {\r\n        data: function () {\r\n            return Commerces.findOne({_id: this.params._id});\r\n        },\r\n        waitOn: function(){\r\n            return Meteor.subscribe(\"allCommerces\");\r\n        }\r\n    });\r\n});\r\n","import SimpleSchema from 'simpl-schema';\r\nSimpleSchema.extendOptions(['autoform']);\r\nSimpleSchema.extendOptions(['denyUpdate']);\r\n\r\nCommerces = new Mongo.Collection('commerces');\r\n\r\nCommerces.allow({\r\n    insert: function(){return true;},\r\n    update: function(){return true;},\r\n    remove: function(){return true;}\r\n});\r\n\r\nCommerces.attachSchema(new SimpleSchema({\r\n    name: {\r\n        type: String,\r\n        label: \"Nom\"\r\n    },\r\n    horaire: {\r\n        type: String,\r\n        label: \"Horaires\"\r\n    },\r\n    telephone: {\r\n        type: String,\r\n        label: \"TÃ©lÃ©phone\"\r\n    },\r\n    ville: {\r\n        type: String,\r\n        label: \"Ville\"\r\n    },\r\n    adresse: {\r\n        type: String,\r\n        label: \"Adresse\"\r\n    },\r\n    menus: {\r\n    type: Array,\r\n    label: \"menus\"\r\n},\r\n    \"menus.$\": {\r\n        type: String,\r\n        label: \"menu\"\r\n    }\r\n\r\n}));","import SimpleSchema from 'simpl-schema';\r\nSimpleSchema.extendOptions(['autoform']);\r\nSimpleSchema.extendOptions(['denyUpdate']);\r\n\r\nMenus = new Mongo.Collection('menus');\r\n\r\nMenus.allow({\r\n    insert: function(){return true;},\r\n    update: function(){return true;},\r\n    remove: function(){return true;}\r\n});\r\n\r\nMenus.attachSchema(new SimpleSchema({\r\n    name: {\r\n        type: String,\r\n        label: \"Nom\"\r\n    },\r\n    description: {\r\n        type: String,\r\n        label: \"Description\"\r\n    },\r\n    prix: {\r\n        type: Number,\r\n        label: \"Prix\"\r\n    },\r\n    rest: {\r\n        type: String,\r\n        label: \"Nombre de produits restants (facultatif)\",\r\n        optional: true\r\n    },\r\n    photo: {\r\n        type: String,\r\n        label: \"URL de l'image (facultatif)\",\r\n        optional: true\r\n    },\r\n    commerces: {\r\n        type: String,\r\n        label: \"Commerces\"\r\n    }\r\n\r\n}));","import SimpleSchema from 'simpl-schema';\r\nSimpleSchema.extendOptions(['autoform']);\r\nSimpleSchema.extendOptions(['denyUpdate']);\r\n\r\n// SchÃ©ma du profil\r\nGlobals.schemas.UserProfile = new SimpleSchema({\r\n    firstName: {\r\n        type: String,\r\n        regEx: /^[a-zA-Z-]{2,25}/,\r\n        optional: true,\r\n        label: \"PrÃ©nom\"\r\n    },\r\n    lastName: {\r\n        type: String,\r\n        regEx: /^[a-zA-Z-]{2,25}/,\r\n        optional: true,\r\n        label: \"Nom\"\r\n    },\r\n    birthDay: {\r\n        type: Date,\r\n        optional: true,\r\n        label: \"Date de naissance\"\r\n    },\r\n    gender: {\r\n        type: String,\r\n        allowedValues: ['M', 'F'],\r\n        optional: true,\r\n        label: \"Genre\",\r\n        autoform: {\r\n            afFieldInput: {\r\n                type: \"select2\", // type de champ particulier, voir plus bas\r\n                options: [\r\n                    {\r\n                        value: \"M\",\r\n                        label: \"Homme\"\r\n                    },\r\n                    {\r\n                        value: \"F\",\r\n                        label: \"Femme\"\r\n                    }\r\n                ]\r\n            }\r\n        }\r\n    }\r\n});\r\n\r\n// SchÃ©ma principal\r\nGlobals.schemas.User = new SimpleSchema({\r\n    username: {\r\n        type: String,\r\n        regEx: /^[a-z0-9A-Z_]{3,15}$/,\r\n        label: \"Nom d'utilisateur\"\r\n    },\r\n    password: {\r\n        type: String,\r\n        label: \"Mot de passe\",\r\n        optional: true,\r\n        autoform: {\r\n            afFieldInput: {\r\n                type: \"password\"\r\n            }\r\n        }\r\n    },\r\n    confirmation: {\r\n        type: String,\r\n        label: \"Confirmation\",\r\n        optional: true,\r\n        custom: function(){\r\n            if(this.value !== this.field('password').value){\r\n                return \"passwordMissmatch\";\r\n            }\r\n        },\r\n        autoform: {\r\n            afFieldInput: {\r\n                type: \"password\"\r\n            }\r\n        }\r\n    },\r\n    emails: {\r\n        type: Array,\r\n        optional: false,\r\n        label: \"Adresses Email\"\r\n    },\r\n    \"emails.$\": {\r\n        type: Object,\r\n    },\r\n    \"emails.$.address\": {\r\n        type: String,\r\n        regEx: SimpleSchema.RegEx.Email,\r\n        /*regEx :[\r\n        {msg: \" failed regular expression validation\"},\r\n        {exp: SimpleSchema.RegEx.Email, msg: \" must be a valid e-mail address\"}],*/\r\n        label: \"Adresse\",\r\n    },\r\n    \"emails.$.verified\": {\r\n        type: Boolean,\r\n        optional: true,\r\n        autoform: {\r\n            omit: true\r\n        }\r\n    },\r\n    createdAt: {\r\n        type: Date,\r\n        autoValue: function () {\r\n            if (this.isInsert) {\r\n                return new Date;\r\n            } else {\r\n                this.unset();\r\n            }\r\n        },\r\n        autoform: {\r\n            omit: true\r\n        }\r\n    },\r\n    profile: {\r\n        type: Globals.schemas.UserProfile,\r\n        optional: true,\r\n\r\n    },\r\n    services: {\r\n        type: Object,\r\n        optional: true,\r\n        blackbox: true,\r\n        autoform:{\r\n            omit: true\r\n        }\r\n    },\r\n    roles: {\r\n        type: Array,\r\n        optional: true,\r\n        autoform: {\r\n            omit: true\r\n        }\r\n    }\r\n   ,\r\n    \"roles.$\": {\r\n        type: String\r\n    }\r\n});\r\n\r\n// On attache ce schÃ©ma Ã  la collection\r\nMeteor.users.attachSchema(Globals.schemas.User);"]}